HTTP Status 404 – Not Found
Type Status Report
Message La ressource demandée [/Test/dispatch] n'est pas disponible
Description The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.
Apache Tomcat/10.1.49
 
there are this error in my test project
this is the web.xml:
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd"
version="6.0">
<filter>
<filter-name>ResourceFilter</filter-name>
<filter-class>framework.servlet.ResourceFilter</filter-class>
</filter>
<filter-mapping>
<filter-name>ResourceFilter</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping>
<servlet>
<servlet-name>FrontServlet</servlet-name>
<servlet-class>framework.servlet.FrontServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>FrontServlet</servlet-name>
<url-pattern>/dispatch</url-pattern>
</servlet-mapping>
<welcome-file-list>
<welcome-file>index.html</welcome-file>
</welcome-file-list>
</web-app>
 
the filter:
package framework.servlet;
import jakarta.servlet.*;
import jakarta.servlet.http.*;
import java.io.File;
import java.io.IOException;
public class ResourceFilter implements Filter {
    @Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
throws IOException, ServletException {
HttpServletRequest httpRequest = (HttpServletRequest) request;
String requestURI = httpRequest.getRequestURI();
String contextPath = httpRequest.getContextPath();
String resourcePath = requestURI.substring(contextPath.length());
// For root URL
if (resourcePath.equals("/") || resourcePath.isEmpty()) {
request.setAttribute("originalURI", requestURI);
RequestDispatcher dispatcher = request.getRequestDispatcher("/dispatch");
dispatcher.forward(request, response);
return;
        }
ServletContext context = request.getServletContext();
String fullResourcePath = context.getRealPath(resourcePath);
File resourceFile = new File(fullResourcePath);
if (resourceFile.exists() && resourceFile.isFile()) {
// Let Tomcat serve static files (CSS, JS, images, index.html)
chain.doFilter(request, response);
        } else {
// Not a file → send to FrontServlet
request.setAttribute("originalURI", requestURI);
RequestDispatcher dispatcher = request.getRequestDispatcher("/dispatch");
dispatcher.forward(request, response);
        }
    }
}
 
the frontservlet:
package framework.servlet;
import framework.core.AnnotationReader;
import framework.utils.ModelAndView;
import jakarta.servlet.*;
import jakarta.servlet.http.*;
import java.io.IOException;
import java.lang.reflect.Method;
public class FrontServlet extends HttpServlet {
    @Override
public void init() throws ServletException {
super.init();
try {
// Scan the test controllers package
AnnotationReader.scanPackage("test.controllers");
        } catch (Exception e) {
throw new ServletException("Failed to scan controllers", e);
        }
    }
        @Override
protected void service(HttpServletRequest req, HttpServletResponse resp)
throws ServletException, IOException {
String originalURI = (String) req.getAttribute("originalURI");
String urlPath = originalURI != null ?
originalURI.substring(req.getContextPath().length()) :
req.getRequestURI().substring(req.getContextPath().length());
String httpMethod = req.getMethod();
System.out.println("Request: " + httpMethod + " " + urlPath);
AnnotationReader.MethodHandler handler = AnnotationReader.getHandler(urlPath, httpMethod);
if (handler == null) {
resp.setStatus(404);
resp.getWriter().write("<h1>404 - tsy hita lty ehhh!!!: " + urlPath + "</h1>");
return;
        }
try {
Method method = handler.method;
method.setAccessible(true);
// Smart parameter injection
Class<?>[] paramTypes = method.getParameterTypes();
Object[] args = new Object[paramTypes.length];
for (int i = 0; i < paramTypes.length; i++) {
Class<?> type = paramTypes[i];
if (type.equals(HttpServletRequest.class)) args[i] = req;
else if (type.equals(HttpServletResponse.class)) args[i] = resp;
else args[i] = null;
            }
Object result = method.invoke(handler.instance, args);
// HANDLE RETURN TYPE
if (result instanceof ModelAndView) {
ModelAndView mv = (ModelAndView) result;
String jspPath = mv.getView();
// Auto prefix with /views/ if not absolute
if (!jspPath.startsWith("/")) {
                    jspPath = "/views/" + jspPath;
                }
if (!jspPath.endsWith(".jsp")) {
                    jspPath += ".jsp";
                }
// Add model to request
mv.getModel().forEach(req::setAttribute);
// Forward to JSP
RequestDispatcher rd = req.getRequestDispatcher(jspPath);
rd.forward(req, resp);
            } else if (result instanceof String str && !str.trim().isEmpty()) {
resp.setContentType("text/html");
resp.getWriter().write("<h2>" + str + "</h2>");
            } else {
String controller = handler.instance.getClass().getSimpleName();
String methodName = handler.method.getName();
resp.getWriter().write(
"<h2 style='color:green'>controller " + controller +
" method " + methodName + "</h2>"
);
            }
        } catch (Exception e) {
resp.setStatus(500);
resp.getWriter().write("<h1>500 - Error: " + e.getMessage() + "</h1>");
e.printStackTrace();
        }
    }
}No response.